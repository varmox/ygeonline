<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>VMware on vBünzli</title><link>/categories/vmware/</link><description>Recent content in VMware on vBünzli</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Copyright © 2022-2024, Y.Gerber &amp; Authors</copyright><lastBuildDate>Mon, 09 Feb 2026 17:40:28 +0100</lastBuildDate><atom:link href="/categories/vmware/index.xml" rel="self" type="application/rss+xml"/><item><title>Data Services Manager - K8s</title><link>/post/dsm-9-k8s/</link><pubDate>Mon, 09 Feb 2026 17:40:28 +0100</pubDate><guid>/post/dsm-9-k8s/</guid><description>
&lt;h1 id="vmware-data-services-manager---k8s-operator"&gt;VMware Data Services Manager - K8s Operator&lt;/h1&gt;
&lt;p&gt;VMware DSM provisions Data Services like Postgres, MySQL and MSSQL. You can consume DSM in three ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DSM UI&lt;/li&gt;
&lt;li&gt;VCF Automation&lt;/li&gt;
&lt;li&gt;K8s Operator&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;DSM Installation is straightforward, just grab the OVA and install it. DSM will install a Plugin in vCenter and the DSM UI will be accessible with the IP you configured on the OVA setup. Nothing special needed, no NSX, no vSAN.&lt;/p&gt;</description></item><item><title>VMware Edge Compute Stack</title><link>/post/vmware-edge-compute-stack/</link><pubDate>Mon, 30 Dec 2024 18:52:03 +0100</pubDate><guid>/post/vmware-edge-compute-stack/</guid><description>
&lt;p&gt;VMware Edge Cloud Compute Stack is a Solution for running workloads on the Edge - &amp;quot;Edge&amp;quot; in this case means running a modified Version of ESXi on really small compute footprint. Management is done from a central Appliane called VECO (VMware Edge Cloud Orchestrator).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ECS vs VCF&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ECS has nothing todo with VMware Cloud Foundation Edge (VCF-Edge). VCF Edge is just a SKU. VCF has different Edge Reference Architectures. ECS is a different Product, generally meat for smaller compute needs.&lt;/p&gt;</description></item><item><title>2-Node vSAN Cluster</title><link>/post/vsan-2-node/</link><pubDate>Tue, 10 Dec 2024 20:20:23 +0100</pubDate><guid>/post/vsan-2-node/</guid><description>
&lt;h1 id="vsan-esa-2-node-cluster-guide-and-recommendations"&gt;vSAN ESA 2-Node Cluster Guide and Recommendations&lt;/h1&gt;
&lt;p&gt;This Guide will help you in your Design Considerations and during the Deployment of a 2-Node vSAN Cluster.&lt;/p&gt;
&lt;h2 id="assumptions"&gt;Assumptions&lt;/h2&gt;
&lt;p&gt;The following assumptions where made when creating this blog post.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You have vSAN Ready Nodes or all Hardware is on the vSAN &lt;a href="https://compatibilityguide.broadcom.com/"&gt;Hardware Compatibility List&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;You have VMware Cloud Foundation (VCF) Licenses or VVF with enough vSAN Add-on Licences&lt;/li&gt;
&lt;li&gt;Phyiscal Network Adapter for vSAN have a Bandwith of 25Gbits or above&lt;/li&gt;
&lt;li&gt;General Knowledge of vSAN and vSphere&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="design"&gt;Design&lt;/h1&gt;
&lt;h2 id="constraints"&gt;Constraints&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Only one host failure can be tolerated at a time (FTT1)&lt;/li&gt;
&lt;li&gt;Adding nodes beyond two would require reconfiguration to a standard vSAN cluster.&lt;/li&gt;
&lt;li&gt;Requires a witness host, which needs two IP addresses - one for management and one for vSAN traffic&lt;/li&gt;
&lt;li&gt;Managing multiple 2-node clusters can increase operational complexity&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="general-considerations"&gt;General Considerations&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Do you have a dedicated vCenter for your 2-Node Cluster?&lt;/li&gt;
&lt;li&gt;Where do you run the vCenter VM? On the 2-Node Cluster itself or outside?&lt;/li&gt;
&lt;li&gt;Does the two physical Server run on the same physical site?&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="vsan-traffic-direct-attached-or-switched"&gt;vSAN Traffic: direct attached or Switched&lt;/h3&gt;
&lt;p&gt;With a 2-Node Cluster you have the possibility to run vSAN (and vMotion) traffic over direct attached Cables. This is a great solution for RoBo or Site which do not offer 25Gbits Ports on Network Switches.&lt;/p&gt;</description></item><item><title>RBAC on VKS</title><link>/post/k8s-rbac/</link><pubDate>Sun, 08 Dec 2024 12:29:05 +0100</pubDate><guid>/post/k8s-rbac/</guid><description>
&lt;h1 id="intro"&gt;Intro&lt;/h1&gt;
&lt;p&gt;This Blogpost explains RBAC on vSphere Kubernetes Service (VKS), formely known as Tanzu Kubernetes Grid Service (TKGS). It also shows how to give access via &lt;em&gt;kubectl&lt;/em&gt; with granular permissions, leveraging OIDC Auth with pinniped on VKS-Clusters.&lt;/p&gt;
&lt;blockquote&gt;
&lt;h4 id="naming"&gt;&lt;strong&gt;Naming&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;I use VKS-, TKGS- and K8s Clusters in this Blog Post. All have the same meaning - simply a Kubernetes Cluster :)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id="rbac-on-vsphere-kubernetes-service"&gt;RBAC on vSphere Kubernetes Service&lt;/h1&gt;
&lt;p&gt;Role-based Access Control on vSphere Kubernetes Cluster has a few Keypoint which should be though about. The main question you have to ask yourself: Which Level of access do I want to grant to which people?&lt;/p&gt;</description></item><item><title>vSphere VM - conflicted PortID</title><link>/post/vsphere-vm-portid-cport/</link><pubDate>Fri, 22 Nov 2024 07:41:26 +0100</pubDate><guid>/post/vsphere-vm-portid-cport/</guid><description>
&lt;h1 id="vms-with-conflicted-portids"&gt;VMs with conflicted PortIDs&lt;/h1&gt;
&lt;p&gt;In certain scenarios it can happend that the PortID (distributed port group) of a VM shows up with the prefix &amp;quot;-c&amp;quot; (eg c-245).
vCenter Server creates a conflict port if multiple virtual machine's point to the same port.
It does not automatically reconfigure the virtual machine to connect to a regular port if the conflict remains and the virtual machine stays connected to the conflict port.&lt;/p&gt;</description></item><item><title>vSphere Lifecycle Manager and HPE OneView for vCenter - Troubleshooting</title><link>/post/vclm-hpe-oneview/</link><pubDate>Wed, 20 Nov 2024 09:25:35 +0100</pubDate><guid>/post/vclm-hpe-oneview/</guid><description>
&lt;h1 id="vsphere-lifecycle-manager-vlcm"&gt;vSphere Lifecycle Manager (vLCM)&lt;/h1&gt;
&lt;p&gt;Some Guidance when troubleshooting Issues with vSphere Lifecycle Manager and HPE OneView for vCenter as a HSM (Hardware Support Manager).&lt;/p&gt;
&lt;h2 id="log-files"&gt;Log Files&lt;/h2&gt;
&lt;p&gt;The General Log File for vLCM is here:&lt;/p&gt;
&lt;p&gt;Log File: /var/log/vmware/vmware-updatemgr/vum-server/vmware-vum-server.log&lt;/p&gt;
&lt;p&gt;To see error from this log file&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vmware&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vmware&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;updatemgr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vum&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vmware&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;vum&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;error&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;3rd Party Depots and their the vCenter Access to those depot is logged in the following file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vmware&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;envoy&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;envoy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;hpe&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="common-errors"&gt;Common Errors&lt;/h2&gt;
&lt;h3 id="cannot-sync-software-depots"&gt;Cannot sync software depots&lt;/h3&gt;
&lt;p&gt;To verify that the online depot registration was successful, navigate to &lt;em&gt;Menu &amp;gt; Lifecycle Manager &amp;gt; Settings &amp;gt; Administration &amp;gt; Patch Setup&lt;/em&gt;. The values in the Enabled and Connectivity Status columns should be &lt;em&gt;Yes&lt;/em&gt; and &lt;em&gt;Connected&lt;/em&gt; respectively. If the Connectivity Status is Not Connected, verify the proper settings for the vCenter proxy configuration and perform a manual sync of the updates.&lt;/p&gt;</description></item><item><title>OpenShift on vSphere - Roles and Permissions</title><link>/post/openshift-on-vsphere/</link><pubDate>Tue, 19 Nov 2024 23:20:09 +0100</pubDate><guid>/post/openshift-on-vsphere/</guid><description>
&lt;h1 id="deployment-mode-installed-provisioned-infrastructure"&gt;Deployment Mode: Installed Provisioned Infrastructure&lt;/h1&gt;
&lt;p&gt;OpenShift Installer-Provisioned Infrastructure (IPI) is a deployment method for OpenShift Container Platform that provides a full-stack automated installation and setup process.&lt;/p&gt;
&lt;p&gt;The installer manages all aspects of the cluster deployment, including the underlying infrastructure and the operating system itself. IPI creates a bootstrap virtual machine on a provisioner node, which assists in deploying the OpenShift cluster.&lt;/p&gt;
&lt;p&gt;The most common way to deploy OpenShift is on vSphere. For the vSphere Integration Permissions are needed:&lt;/p&gt;</description></item><item><title>VMware vCenter Troubleshooting Guide</title><link>/post/vcenter-troubleshooting/</link><pubDate>Fri, 23 Aug 2024 22:24:18 +0200</pubDate><guid>/post/vcenter-troubleshooting/</guid><description>
&lt;h1 id="vcenter-troubleshooting-guide"&gt;vCenter Troubleshooting Guide&lt;/h1&gt;
&lt;p&gt;The following Troubleshooting Guide applies to vCenter 8 and above.&lt;/p&gt;
&lt;blockquote&gt;
&lt;h4 id="caution"&gt;Caution!&lt;/h4&gt;
&lt;p&gt;Create a VM Snapshot of your vCenter before proceeding with any step!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="general-troubleshooting"&gt;General Troubleshooting&lt;/h2&gt;
&lt;p&gt;Log files can be accesses trough ssh or bash. SSH login works with the root user or your SSO Admi User (commonly &lt;a href="mailto:administrator@vsphere.local"&gt;administrator@vsphere.local&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SSH not working&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If SSH does not work (eg. due to a networki misconfiguration) you can access the vCenter via bash (VM Remote Console).&lt;/p&gt;</description></item><item><title>VMware Cloud Foundation 5.2</title><link>/post/vcf52/</link><pubDate>Tue, 25 Jun 2024 20:48:30 +0200</pubDate><guid>/post/vcf52/</guid><description>
&lt;p&gt;The new VCF 5.2 Update delivers quite a few interesting updates. This blog post covers expecially the updates and improvements for Tanzu.&lt;/p&gt;
&lt;p&gt;Part 1 covers new Feature within Tanzu on vSphere 8 Update 3.&lt;/p&gt;
&lt;h2 id="vsphere-with-tanzu-update---vsphere-iaas-control-plane"&gt;vSphere with Tanzu Update -&amp;gt; vSphere IaaS Control Plane&lt;/h2&gt;
&lt;p&gt;vSphere with Tanzu is passé - the new naming is vSphere IaaS Control Plane.&lt;/p&gt;
&lt;p&gt;The naming already suggest - not only Kubernetes Cluster can be deployed, also VMs (this was possible a long time but with the new naming the focus is not only on k8s). Via the vm-operator you can deploy VMs alongside Tanzu Kubernetes Cluster. The IaaS Control Plane is really interesting as you can deploy VMs with Code. A YAML File will describe your VM. For that the VM Class now support much more configuration, it handled like a normal VM provisioned through vSphere UI.&lt;/p&gt;</description></item><item><title>vSphere REST API - Intro</title><link>/post/vsphere-api/</link><pubDate>Thu, 20 Jun 2024 22:22:08 +0200</pubDate><guid>/post/vsphere-api/</guid><description>
&lt;h1 id="getting-started-with-the-vsphere-api"&gt;Getting started with the vSphere API&lt;/h1&gt;
&lt;p&gt;The vSphere REST API, introduced in vSphere 6.5, represents a significant leap forward in managing and automating VMware environments. This modern, developer-friendly interface offers a more streamlined approach to interacting with vSphere compared to its predecessor, the SOAP-based vSphere Web Services API.&lt;/p&gt;
&lt;p&gt;Key features of the vSphere REST API include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RESTful architecture: It follows REST principles, using standard HTTP methods (GET, POST, PUT, DELETE) for operations.&lt;/li&gt;
&lt;li&gt;JSON-based: Requests and responses use JSON format, making it easier to parse and work with data.&lt;/li&gt;
&lt;li&gt;Simplified interaction: The API is designed to be more intuitive and easier to use than the older SOAP-based API.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To get started with the vSphere REST API, you can use the built-in API Explorer in vCenter Server, accessible at https://&amp;lt; vcenter.example.com &amp;gt;/apiexplorer. This tool provides interactive documentation and allows you to test API calls directly from your browser.&lt;/p&gt;</description></item><item><title>vCenter File Level Restore - Edit Configuration</title><link>/post/vcenter-file-level-restore/</link><pubDate>Fri, 23 Feb 2024 12:18:49 +0200</pubDate><guid>/post/vcenter-file-level-restore/</guid><description>
&lt;h1 id="intro"&gt;Intro&lt;/h1&gt;
&lt;p&gt;With vCenter File-level Backups you can restore your entire vCenter configuration. If your running vCenter has some misconfigurations (eg. a false proxy setting) and isn't working, you can use existing file-level backups and clear those misconfigurations before restoring.&lt;/p&gt;
&lt;h2 id="basic-process"&gt;Basic Process&lt;/h2&gt;
&lt;p&gt;The Basic vCenter File-level Restore Process looks like the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Deploy a fresh vCenter via ISO (VCSA UI Installer)
&lt;ul&gt;
&lt;li&gt;Shutdown the defunct vCenter (IP Conflicts)&lt;/li&gt;
&lt;li&gt;Same Network Configuration&lt;/li&gt;
&lt;li&gt;Same build number&lt;/li&gt;
&lt;li&gt;Same Size (Tiny, Small, Medium Large)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;When Stage 1 is completed you can start the Stage 2 Process to Restore your vCenter Configuration&lt;/li&gt;
&lt;li&gt;In case of a misconfiguration (which has also been backed up) you have the option to edit all configurations files&lt;/li&gt;
&lt;li&gt;Restore vCenter with configurations edits&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="stage-1---deploying-a-fresh-blank-appliance"&gt;Stage 1 - Deploying a fresh (blank) appliance&lt;/h1&gt;
&lt;p&gt;Before deploying a fresh vCenter, have a look at you VCSA Backup folder. In the root of each backupfolder there is a file 'backup-metadata.json' - within there grab the details before deploying a fresh VCSA:&lt;/p&gt;</description></item><item><title>VMware Tanzu - Overview</title><link>/post/tanzu-overview/</link><pubDate>Thu, 08 Feb 2024 20:43:03 +0200</pubDate><guid>/post/tanzu-overview/</guid><description>
&lt;h1 id="tanzu-portfolio-explained"&gt;Tanzu Portfolio explained&lt;/h1&gt;
&lt;p&gt;Lately, we've been having lots conversations internally and with customers about Tanzu.
There appears to be some confusion about Tanzu's portfolio and which Tanzu products are best suited for specific use cases.&lt;/p&gt;
&lt;blockquote&gt;
&lt;h4 id="update-november-2024"&gt;&lt;strong&gt;Update November 2024&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;With the VMware aquisition by Broadcom, the are some changes in the Naming and Product Bundles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The new naming for vSphere with Tanzu is IaaS Control Plane. The Kubernetes Runtime itself is part of VMware Cloud Foundation (VCF).
Add-on's, Management Tools are now part of the Tanzu Business Unit (BU). Tanzu Products include:&lt;/p&gt;</description></item><item><title>Tanzu Kubernetes Grid - Linux Workstation Setup</title><link>/post/tanzu-kubernetes-grid-workstation-setup/</link><pubDate>Sun, 08 Oct 2023 20:43:03 +0200</pubDate><guid>/post/tanzu-kubernetes-grid-workstation-setup/</guid><description>
&lt;h2 id="tkg-bootstrap-machine-on-fedora"&gt;TKG Bootstrap Machine on Fedora&lt;/h2&gt;
&lt;p&gt;Tanzu Kubernetes Grid needs a workstation to bootstrap your Kubernetes Cluster. This is a short guide for a Fedora based bootstrap Machine:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Requirements&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ability to run Docker&lt;/li&gt;
&lt;li&gt;Access to download Tanzu CLI (via Customer Connect Portal)&lt;/li&gt;
&lt;li&gt;dedicated admin user in the wheel-group&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Install Docker&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Docker on modern RHEL systems can be confusing because the latest versions of RHEL replace Docker with Podman (dnf install docker will install podman). I should work with podman, but we explicity are going to install Docker Container Engine.&lt;/p&gt;</description></item><item><title>vSphere Monitoring with Grafana</title><link>/post/vsphere-monitoring/</link><pubDate>Tue, 08 Aug 2023 20:43:03 +0200</pubDate><guid>/post/vsphere-monitoring/</guid><description>
&lt;h1 id="vsphere-monitoring-with-tig-telegraf-influxdb-grafana"&gt;vSphere Monitoring with TIG (Telegraf, InfluxDB, Grafana)&lt;/h1&gt;
&lt;p&gt;This blog post describes a solution for monitoring SDDC infrastructure using Telegraf, InfluxDB, and Grafana. This solution is based on Docker and displays graphs and metrics via Grafana. All metrics are described in the &lt;em&gt;&lt;strong&gt;telegraf.conf&lt;/strong&gt;&lt;/em&gt; file.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
&lt;picture&gt;
&lt;img
loading="lazy"
decoding="async"
alt="Grafana - vSphere Overview"
class="image_figure image_external image_processed"
width="3338"
height="1334"
src="/images/QbfN11Q_17788218198938191418.png"
/&gt;
&lt;/picture&gt;
&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;TL;DR:
&lt;a href="https://github.com/varmox/vsphere-monitoring.git"&gt;https://github.com/varmox/vsphere-monitoring.git&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="prerequiries"&gt;Prerequiries&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;RHEL based Linux&lt;/li&gt;
&lt;li&gt;Docker &amp;amp; Docker Compose (or Podman with Docker Compose. In this tutorial we are using docker &amp;amp; docker compose) installed&lt;/li&gt;
&lt;li&gt;3 internal IPs for telegraf, grafana and influxdb containers.&lt;/li&gt;
&lt;li&gt;Access to vSphere API (read-only is sufficient)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Environment Variables&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;</description></item><item><title>Tanzu Kubernetes Cluster Example Deployments</title><link>/post/tanzu-kubernetes-cluster-examples/</link><pubDate>Fri, 23 Jun 2023 23:13:14 +0200</pubDate><guid>/post/tanzu-kubernetes-cluster-examples/</guid><description>
&lt;h1 id="intro"&gt;Intro&lt;/h1&gt;
&lt;p&gt;This post gives a few examples of Tanzu Kubernetes Cluster Manifests and how to deploy them.&lt;/p&gt;
&lt;h3 id="prerequiries"&gt;Prerequiries&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Successfull Installation of vSphere with Tanzu Supervisor&lt;/li&gt;
&lt;li&gt;vSphere Namespace created&lt;/li&gt;
&lt;li&gt;Already existing VM Classes, Storages Policies and Tanzu Kubernetes Releases assigned to the Namespace.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="login-via-kubectl"&gt;Login via kubectl&lt;/h2&gt;
&lt;p&gt;You will find the IP to your Kubernetes API on the Namespace Option &amp;quot;Link to CLI Tools&amp;quot;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl vsphere login --server=10.40.80.20
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl config get-contexts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl config use-context &amp;lt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="get-parameters-of-your-vsphere-namespace"&gt;Get Parameters of your vSphere Namespace&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;VM Class&lt;/li&gt;
&lt;li&gt;Storagge Policy&lt;/li&gt;
&lt;li&gt;Tanzu Releases&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl get vmclass
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl get storageclass
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl get tanzukubernetesrelease
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="cluster-with-3-control-and-6-worker-nodes"&gt;Cluster with 3 Control and 6 Worker Nodes&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tanzu&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vmware&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v1alpha3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;TanzuKubernetesCluster&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tkgs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cluster&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;namespace&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tkgs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cluster&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;topology&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;controlPlane&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;replicas&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;vmClass&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;best&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;effort&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;large&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;storageClass&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;workload&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;tkr&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;reference&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;v1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;23.8&lt;/span&gt;&lt;span class="o"&gt;---&lt;/span&gt;&lt;span class="n"&gt;vmware&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;zshippable&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;nodePools&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;replicas&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;worker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;vmClass&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;best&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;effort&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;large&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;storageClass&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;workload&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Save this file as a yaml file on your workstation.&lt;/p&gt;</description></item><item><title>Quicktip: Tanzu &amp; HA-Proxy</title><link>/post/tanzu-haproxy-tips/</link><pubDate>Wed, 08 Mar 2023 20:43:03 +0200</pubDate><guid>/post/tanzu-haproxy-tips/</guid><description>
&lt;h1 id="quick-tip-vsphere-with-tanzu-an-ha-proxy"&gt;Quick Tip: vSphere with Tanzu an HA-Proxy&lt;/h1&gt;
&lt;p&gt;This is a short article with tips and tricks I experienced when deploying vSphere with Tanzu and HA-Proxy as a Load Balancer.&lt;/p&gt;
&lt;h2 id="deploying-ha-proxy-ova"&gt;Deploying Ha-Proxy OVA&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Network&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Alwasys use three NICs when deploying in a production environment. It is very important that these IP addresses do not overlap with the address ranges of your workloads and load balancers, or with the gateway itself.&lt;/p&gt;
&lt;p&gt;At first it can be somewhat confusing what networks are needed and which services will be deployed in each network.&lt;/p&gt;</description></item></channel></rss>